(()=>{"use strict";function e(){const e={},t=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],o=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],i=()=>t;return{getShipDict:()=>e,getGrid:i,getShotsGrid:()=>o,placeShip:(o,i,r)=>{if(!1===((e,t,o)=>!(e.getLength()+o>7))(o,0,r))return!1;const c=o.getLength();t[i].splice(r,c);for(let e=0;e<c;e++)t[i].splice(r,0,c);return(t=>{e[t.getLength()]=t})(o),!0},canReceiveAttack:(e,t)=>0===o[e][t],receiveAttack:(t,r)=>{let c=!1;return 0!==i()[t][r]?(c=!0,e[i()[t][r]].hit()):0===i()[t][r]&&(i()[t][r]="miss"),o[t][r]=1,c},isAllSunk:()=>{for(let t in e)if(!1===e[t].isSunk())return!1;return!0}}}function t(e){let t=0;return{getLength:()=>e,getTimesHit:()=>t,hit:()=>{t++},isSunk:()=>t>=e}}const o=(e,t)=>{const o=document.querySelector(".grid--player"),i=document.querySelector(".grid--enemy");let r,c;r=0,c=0;for(let t of e.getBoard().getGrid()){console.log(t);for(let i of t){const t=document.createElement("div");t.classList.add("grid--player__cell","cell"),1===e.getBoard().getShotsGrid()[r][c]&&("miss"!==i&&t.classList.add("confirm"),t.classList.add("hit")),"miss"!==i&&0!==i&&t.classList.add("ship"),o.append(t),c++}r++}r=0,c=0;for(let e of t.getBoard().getGrid()){for(let o of e){const e=document.createElement("div");e.classList.add("grid--enemy_cell","cell"),1===t.getBoard().getShotsGrid()[r][c]&&("miss"!==o&&e.classList.add("confirm"),e.classList.add("hit")),i.append(e),c++}r++}},i=function(o){const i=e();return{getName:()=>"TestPlayer",getBoard:()=>i,doAttack:(e,t,o)=>{let i=!1;const r=e.getBoard();return!0===r.canReceiveAttack(t,o)&&(r.receiveAttack(t,o),i=!0),i},deployShip:(e,o,r)=>i.placeShip(t(e),o,r)}}();i.deployShip(1,0,0),i.deployShip(2,3,1),i.deployShip(3,1,2),i.deployShip(4,4,2),i.deployShip(5,6,2);const r=function(){const o=e();return{getBoard:()=>o,doRandomAttack:e=>{const t=e.getBoard();let o=!1;for(;!o;){const e=Math.floor(7*Math.random()),i=Math.floor(7*Math.random());!0===t.canReceiveAttack(e,i)&&(t.receiveAttack(e,i),o=!0)}return o},deployShip:(e,i,r)=>o.placeShip(t(e),i,r)}}();r.deployShip(1,0,0),r.deployShip(2,0,1),r.deployShip(3,0,3),r.deployShip(4,1,0),r.deployShip(5,6,2),o(i,r)})();