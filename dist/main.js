(()=>{"use strict";function e(){const e={},t=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],i=[[1,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],o=()=>t;return{getShipDict:()=>e,getGrid:o,getShotsGrid:()=>i,placeShip:(i,o,r)=>{if(!1===((e,t,i)=>!(e.getLength()+i>7))(i,0,r))return!1;const c=i.getLength();t[o].splice(r,c);for(let e=0;e<c;e++)t[o].splice(r,0,c);return(t=>{e[t.getLength()]=t})(i),!0},canReceiveAttack:(e,t)=>0===i[e][t],receiveAttack:(t,r)=>{let c=!1;return 0!==o()[t][r]?(c=!0,e[o()[t][r]].hit()):0===o()[t][r]&&(o()[t][r]="miss"),i[t][r]=1,c},isAllSunk:()=>{for(let t in e)if(!1===e[t].isSunk())return!1;return!0}}}function t(e){let t=0;return{getLength:()=>e,getTimesHit:()=>t,hit:()=>{t++},isSunk:()=>t>=e}}const i=(e,t)=>{const i=document.querySelector(".grid--player"),o=document.querySelector(".grid--enemy");let r,c;r=0;for(let t of e.getBoard().getGrid()){c=0;for(let o of t){const t=document.createElement("div");t.classList.add("grid--player__cell","cell"),1===e.getBoard().getShotsGrid()[r][c]&&("miss"!==o&&t.classList.add("confirm"),t.classList.add("hit")),"miss"!==o&&0!==o&&t.classList.add("ship"),i.append(t),c++}r++}r=0;for(let e of t.getBoard().getGrid()){c=0;for(let i of e){const e=document.createElement("div");e.classList.add("grid--enemy_cell","cell"),1===t.getBoard().getShotsGrid()[r][c]&&("miss"!==i&&e.classList.add("confirm"),e.classList.add("hit")),e.id=`${r}-${c}`,e.classList.contains("hit")||e.addEventListener("click",(()=>{const t=Number(e.id.split("-")[0]),i=Number(e.id.split("-")[1]);console.log(t,i)})),o.append(e),c++}r++}},o=function(i){const o=e();return{getName:()=>"TestPlayer",getBoard:()=>o,doAttack:(e,t,i)=>{let o=!1;const r=e.getBoard();return!0===r.canReceiveAttack(t,i)&&(r.receiveAttack(t,i),o=!0),o},deployShip:(e,i,r)=>o.placeShip(t(e),i,r)}}();o.deployShip(1,0,0),o.deployShip(2,3,1),o.deployShip(3,1,2),o.deployShip(4,4,2),o.deployShip(5,6,2);const r=function(){const i=e();return{getBoard:()=>i,doRandomAttack:e=>{const t=e.getBoard();let i=!1;for(;!i;){const e=Math.floor(7*Math.random()),o=Math.floor(7*Math.random());!0===t.canReceiveAttack(e,o)&&(t.receiveAttack(e,o),i=!0)}return i},deployShip:(e,o,r)=>i.placeShip(t(e),o,r)}}();r.deployShip(1,0,0),r.deployShip(2,0,1),r.deployShip(3,0,3),r.deployShip(4,1,0),r.deployShip(5,6,2),i(o,r)})();