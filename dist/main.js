(()=>{"use strict";function e(){const e={},t=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],o=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],r=()=>t;return{getShipDict:()=>e,getGrid:r,getShotsGrid:()=>o,placeShip:(o,r,i)=>{if(!1===((e,t,o)=>!(e.getLength()+o>7))(o,0,i))return!1;const c=o.getLength();t[r].splice(i,c);for(let e=0;e<c;e++)t[r].splice(i,0,c);return(t=>{e[t.getLength()]=t})(o),!0},canReceiveAttack:(e,t)=>0===o[e][t],receiveAttack:(t,i)=>{let c=!1;return 0!==r()[t][i]?(c=!0,e[r()[t][i]].hit()):0===r()[t][i]&&(r()[t][i]="miss"),o[t][i]=1,c},isAllSunk:()=>{for(let t in e)if(!1===e[t].isSunk())return!1;return!0}}}function t(e){let t=0;return{getLength:()=>e,getTimesHit:()=>t,hit:()=>{t++},isSunk:()=>t>=e}}const o=(e,t)=>{const o=document.querySelector(".grid--player"),r=document.querySelector(".grid--enemy");let i,c;i=0,c=0;for(let t of e.getBoard().getGrid()){console.log(t);for(let r of t){const t=document.createElement("div");t.classList.add("grid--player__cell","cell"),1===e.getBoard().getShotsGrid()[i][c]&&("miss"!==r&&t.classList.add("confirm"),t.classList.add("hit")),o.append(t),c++}i++}i=0,c=0;for(let e of t.getBoard().getGrid()){for(let o of e){const e=document.createElement("div");e.classList.add("grid--enemy_cell","cell"),1===t.getBoard().getShotsGrid()[i][c]&&("miss"!==o&&e.classList.add("confirm"),e.classList.add("hit")),r.append(e),c++}i++}},r=function(o){const r=e();return{getName:()=>"TestPlayer",getBoard:()=>r,doAttack:(e,t,o)=>{let r=!1;const i=e.getBoard();return!0===i.canReceiveAttack(t,o)&&(i.receiveAttack(t,o),r=!0),r},deployShip:(e,o,i)=>r.placeShip(t(e),o,i)}}();r.deployShip(1,0,0),r.deployShip(2,3,1),r.deployShip(3,1,2),r.deployShip(4,4,2),r.deployShip(5,6,2);const i=function(){const o=e();return{getBoard:()=>o,doRandomAttack:e=>{const t=e.getBoard();let o=!1;for(;!o;){const e=Math.floor(7*Math.random()),r=Math.floor(7*Math.random());!0===t.canReceiveAttack(e,r)&&(t.receiveAttack(e,r),o=!0)}return o},deployShip:(e,r,i)=>o.placeShip(t(e),r,i)}}();i.deployShip(1,0,0),i.deployShip(2,0,1),i.deployShip(3,0,3),i.deployShip(4,1,0),i.deployShip(5,6,2),o(r,i)})();